overlay: 1.0.0
info:
  title: Fix timestamp value field format to generate as string type
  version: 0.0.1
actions:
  # Remove format field from timestamp value in components.schemas.output-value
  - target: "$.components.schemas['output-value'].anyOf[18].properties.value.format"
    description: "Remove format field from timestamp value in output-value schema to generate as str instead of date"
    remove: true

  # Remove format field from timestamp value in POST /v2/objects/{object}/records/query response
  - target: "$.paths['/v2/objects/{object}/records/query'].post.responses['200'].content['application/json'].schema.properties.data.items.properties.values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in query records response"
    remove: true

  # Remove format field from timestamp value in POST /v2/objects/{object}/records response
  - target: "$.paths['/v2/objects/{object}/records'].post.responses['200'].content['application/json'].schema.properties.data.properties.values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in POST records response"
    remove: true

  # Remove format field from timestamp value in PUT /v2/objects/{object}/records response
  - target: "$.paths['/v2/objects/{object}/records'].put.responses['200'].content['application/json'].schema.properties.data.properties.values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in PUT records response"
    remove: true

  # Remove format field from timestamp value in GET /v2/objects/{object}/records/{record_id} response
  - target: "$.paths['/v2/objects/{object}/records/{record_id}'].get.responses['200'].content['application/json'].schema.properties.data.properties.values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in GET record response"
    remove: true

  # Remove format field from timestamp value in PATCH /v2/objects/{object}/records/{record_id} response
  - target: "$.paths['/v2/objects/{object}/records/{record_id}'].patch.responses['200'].content['application/json'].schema.properties.data.properties.values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in PATCH record response"
    remove: true

  # Remove format field from timestamp value in PUT /v2/objects/{object}/records/{record_id} response
  - target: "$.paths['/v2/objects/{object}/records/{record_id}'].put.responses['200'].content['application/json'].schema.properties.data.properties.values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in PUT record response"
    remove: true

  # Remove format field from timestamp value in GET /v2/objects/{object}/records/{record_id}/attributes/{attribute}/values response
  - target: "$.paths['/v2/objects/{object}/records/{record_id}/attributes/{attribute}/values'].get.responses['200'].content['application/json'].schema.properties.data.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in GET attribute values response"
    remove: true

  # Remove format field from timestamp value in POST /v2/lists/{list}/entries/query response
  - target: "$.paths['/v2/lists/{list}/entries/query'].post.responses['200'].content['application/json'].schema.properties.data.items.properties.entry_values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in query list entries response"
    remove: true

  # Remove format field from timestamp value in POST /v2/lists/{list}/entries response
  - target: "$.paths['/v2/lists/{list}/entries'].post.responses['200'].content['application/json'].schema.properties.data.properties.entry_values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in POST list entries response"
    remove: true

  # Remove format field from timestamp value in PUT /v2/lists/{list}/entries response
  - target: "$.paths['/v2/lists/{list}/entries'].put.responses['200'].content['application/json'].schema.properties.data.properties.entry_values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in PUT list entries response"
    remove: true

  # Remove format field from timestamp value in GET /v2/lists/{list}/entries/{entry_id} response
  - target: "$.paths['/v2/lists/{list}/entries/{entry_id}'].get.responses['200'].content['application/json'].schema.properties.data.properties.entry_values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in GET list entry response"
    remove: true

  # Remove format field from timestamp value in PATCH /v2/lists/{list}/entries/{entry_id} response
  - target: "$.paths['/v2/lists/{list}/entries/{entry_id}'].patch.responses['200'].content['application/json'].schema.properties.data.properties.entry_values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in PATCH list entry response"
    remove: true

  # Remove format field from timestamp value in PUT /v2/lists/{list}/entries/{entry_id} response
  - target: "$.paths['/v2/lists/{list}/entries/{entry_id}'].put.responses['200'].content['application/json'].schema.properties.data.properties.entry_values.additionalProperties.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in PUT list entry response"
    remove: true

  # Remove format field from timestamp value in GET /v2/lists/{list}/entries/{entry_id}/attributes/{attribute}/values response
  - target: "$.paths['/v2/lists/{list}/entries/{entry_id}/attributes/{attribute}/values'].get.responses['200'].content['application/json'].schema.properties.data.items.oneOf[16].properties.value.format"
    description: "Remove format field from timestamp value in GET list entry attribute values response"
    remove: true

  # Rename 'list' parameter to 'list_id' to avoid shadowing Python built-in
  - target: "$.paths['/v2/lists/{list}'].get.parameters[?(@.name == 'list')].name"
    description: "Rename 'list' parameter to 'list_id' in GET /v2/lists/{list}"
    update: "list_id"

  - target: "$.paths['/v2/lists/{list}'].patch.parameters[?(@.name == 'list')].name"
    description: "Rename 'list' parameter to 'list_id' in PATCH /v2/lists/{list}"
    update: "list_id"

  - target: "$.paths['/v2/lists/{list}/entries'].post.parameters[?(@.name == 'list')].name"
    description: "Rename 'list' parameter to 'list_id' in POST /v2/lists/{list}/entries"
    update: "list_id"

  - target: "$.paths['/v2/lists/{list}/entries'].put.parameters[?(@.name == 'list')].name"
    description: "Rename 'list' parameter to 'list_id' in PUT /v2/lists/{list}/entries"
    update: "list_id"

  - target: "$.paths['/v2/lists/{list}/entries/{entry_id}'].delete.parameters[?(@.name == 'list')].name"
    description: "Rename 'list' parameter to 'list_id' in DELETE /v2/lists/{list}/entries/{entry_id}"
    update: "list_id"

  - target: "$.paths['/v2/lists/{list}/entries/{entry_id}'].get.parameters[?(@.name == 'list')].name"
    description: "Rename 'list' parameter to 'list_id' in GET /v2/lists/{list}/entries/{entry_id}"
    update: "list_id"

  - target: "$.paths['/v2/lists/{list}/entries/{entry_id}'].patch.parameters[?(@.name == 'list')].name"
    description: "Rename 'list' parameter to 'list_id' in PATCH /v2/lists/{list}/entries/{entry_id}"
    update: "list_id"

  - target: "$.paths['/v2/lists/{list}/entries/{entry_id}'].put.parameters[?(@.name == 'list')].name"
    description: "Rename 'list' parameter to 'list_id' in PUT /v2/lists/{list}/entries/{entry_id}"
    update: "list_id"

  - target: "$.paths['/v2/lists/{list}/entries/{entry_id}/attributes/{attribute}/values'].get.parameters[?(@.name == 'list')].name"
    description: "Rename 'list' parameter to 'list_id' in GET /v2/lists/{list}/entries/{entry_id}/attributes/{attribute}/values"
    update: "list_id"

  - target: "$.paths['/v2/lists/{list}/entries/query'].post.parameters[?(@.name == 'list')].name"
    description: "Rename 'list' parameter to 'list_id' in POST /v2/lists/{list}/entries/query"
    update: "list_id"
